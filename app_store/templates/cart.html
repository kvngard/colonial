<%inherit file="app_base/templates/base_ajax.html" />

<%block name="content">
  <div class='box' id='cart'>
    %if len(items) == 0:
      <div layout vertical center>
        <h2>Your Shopping Cart Is Empty</h2>
        <p>Your cart is lives to serve, so give it purpose by filling it with all of the <a href='/app_store/'>amazing things we have to offer.</a></p>
      </div>
    %else:
    <h2>Shopping Cart</h2>
    <table class="striped">
      <thead>
        <tr>
          <th data-field="id">Item Name</th>
          <th data-field="quantity">Quantity</th>
          <th data-field="price">Price</th>
          <th>Options</th>
        </tr>
      </thead>
      <tbody>
        %for item in items:
        <tr>
          <td>${item.name}</td>
          <td>
            <select class="select-dropdown">
            %for j in reversed(range(1,cart[str(item.id)]+1)):
              <option value="${j}"}>${j}</option>
            %endfor
          </td>
          %if hasattr(item, 'price'):
            <td>$${cart[str(item.id)] * item.price}</td>
          %elif hasattr(item, 'price_per_day'):
            <td>$${cart[str(item.id)] * item.price_per_day}</td>
          %endif
          <td>
            <div class='options'>
              <a rel="${item.id}" class="btn-flat waves-effect waves-light red accent-3 white-text delete-btn">Remove</a>
            </div>
          </td>
        </tr>
        %endfor
      </tbody>
    </table>
  </div>
  <div id='checkout'>
    %if request.user.is_authenticated():
    <a href="/app_store/index.checkout/">
    %else:
    <a class="login-btn">
    %endif
      <button class="btn waves-effect waves-light orange accent-3" type="submit" name="action">
        Checkout
      </button>
    </a>
    %endif
  </div>
</%block>